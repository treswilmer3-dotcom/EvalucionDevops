---
- name: Validar comunicaciÃ³n entre todos los nodos
  hosts: all
  gather_facts: yes
  
  tasks:
    - name: Test de conectividad SSH
      ping:
      
    - name: Mostrar informaciÃ³n de cada nodo
      debug:
        msg: |
          ==========================================
          ğŸ–¥ï¸  NODO: {{ ansible_hostname }}
          ğŸŒ IP: {{ ansible_default_ipv4.address }}
          ğŸ’¾ OS: {{ ansible_distribution }} {{ ansible_distribution_version }}
          ğŸ§  RAM: {{ ansible_memtotal_mb }}MB
          âš¡ CPU: {{ ansible_processor_cores }} cores
          ğŸ“ Arquitectura: {{ ansible_architecture }}
          ==========================================
      
    - name: Verificar conectividad a internet
      uri:
        url: https://httpbin.org/ip
        method: GET
        timeout: 10
      register: internet_check
      ignore_errors: yes
      
    - name: Mostrar estado de internet
      debug:
        msg: "ğŸŒ Internet: {{ 'âœ… CONECTADO' if internet_check.status == 200 else 'âŒ SIN CONEXIÃ“N' }}"
      
    - name: Verificar espacio en disco
      shell: df -h /
      register: disk_space
      
    - name: Mostrar espacio en disco
      debug:
        msg: "ğŸ’¾ Disco: {{ disk_space.stdout_lines[1] }}"
      
    - name: Verificar uptime del sistema
      command: uptime
      register: uptime_result
      
    - name: Mostrar uptime
      debug:
        msg: "â° Uptime: {{ uptime_result.stdout }}"
