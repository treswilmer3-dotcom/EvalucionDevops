---
- name: Probar conectividad entre nodos
  hosts: all
  gather_facts: yes
  
  tasks:
    - name: Verificar conexión SSH
      ping:
      
    - name: Mostrar información del sistema
      debug:
        msg: |
          Hostname: {{ ansible_hostname }}
          IP: {{ ansible_default_ipv4.address }}
          OS: {{ ansible_distribution }} {{ ansible_distribution_version }}
          Memoria: {{ ansible_memtotal_mb }}MB
          CPU: {{ ansible_processor_cores }} cores

    - name: Verificar conectividad a internet
      uri:
        url: https://httpbin.org/ip
        method: GET
        timeout: 10
      register: internet_check
      ignore_errors: yes

    - name: Mostrar resultado de conectividad
      debug:
        msg: "Conectividad a internet: {{ 'OK' if internet_check.status == 200 else 'FALLÓ' }}"
